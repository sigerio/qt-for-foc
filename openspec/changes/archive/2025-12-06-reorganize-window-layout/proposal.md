# 变更提案：重构三窗口布局

## 概述
重新组织FOC可视化学习工具的三窗口布局：
- **窗口1**：算法可视化 + 所有参数配置
- **窗口2**：纯波形显示（12组数据波形）
- **窗口3**：改为选项卡形式，可开关

## 动机
当前布局将参数配置和波形显示混合在窗口2的各环路面板中，用户需要在不同位置查找配置项。重构后：
- 参数配置集中，便于调参
- 波形显示独立，便于观察数据变化
- 算法说明按需显示，减少界面复杂度

## 变更内容

### 1. 窗口1重构（参数配置中心）
**保留内容：**
- 坐标变换面板（αβ矢量圆、dq矢量圆）
- SVPWM面板（六边形矢量图、扇区显示）
- 电机状态面板（转子动画）
- 电机参数面板（Rs、Ld、Lq、ψf、J、B、极对数）
- 步骤指示器 / 霍尔指示器

**新增内容：**
- 三环PID参数调节区（从窗口2移入）
  - 电流环：Kp、Ki
  - 速度环：Kp、Ki、目标值
  - 位置环：Kp、Ki、Kd、目标值
- 各环路使能开关（从窗口2移入）
- 控制工具栏（从窗口2移入）
  - 运行/暂停/单步/复位按钮
  - 电机类型选择
  - 控制模式选择
  - 仿真速度选择
  - 配置文件导入/导出

### 2. 窗口2重构（波形显示中心）
替换当前的三环控制面板，改为纯波形显示窗口：

| 行 | 布局 | 波形 | 说明 |
|---|------|------|------|
| 1 | 两列 | Ud, Uq \| Id, Iq | dq坐标系电压电流 |
| 2 | 单列 | Uα, Uβ | αβ坐标系电压 |
| 3 | 单列 | Iα, Iβ | αβ坐标系电流 |
| 4 | 单列 | Ua, Ub, Uc | 三相电压 |
| 5 | 单列 | Ia, Ib, Ic | 三相电流 |
| 6 | 单列 | Ta, Tb, Tc | PWM占空比 |
| 7 | 单列 | id_ref, iq_ref | 电流参考值 |
| 8 | 单列 | vel_ref, velocity | 速度参考与实际 |
| 9 | 单列 | pos_ref, position | 位置参考与实际 |

布局采用垂直滚动区域，第1行两列布局，其余8行单列全宽，共10个 waveform_view 组件。

### 3. 窗口3改造（选项卡形式）
将算法说明窗口改为可切换的选项卡形式：
- 默认隐藏，通过菜单或按钮开启
- 内容以选项卡组织：电机模型 | 坐标变换 | SVPWM | 三环控制
- 保留控制框图编辑器功能

## 影响范围
- `foc_visualization_window`：添加参数配置区
- `control_loop_window`：重构为纯波形窗口
- `algorithm_explanation_window`：改为选项卡形式
- `main.cpp`：更新信号连接
- 各环路面板：拆分为配置组件和波形组件

## 风险评估
- **中等风险**：涉及多个窗口的大规模重构
- 需要保持所有信号连接正确
- 波形数据源需要扩展（增加电压波形）
