## 1. 创建参数配置面板组件

### 1.1 三环PID配置面板
- [x] 1.1.1 创建 `pid_config_panel.h/cpp`
- [x] 1.1.2 电流环PI参数（Kp、Ki滑块+数值框）
- [x] 1.1.3 速度环PI参数（Kp、Ki滑块+数值框）+ 目标值
- [x] 1.1.4 位置环PID参数（Kp、Ki、Kd滑块+数值框）+ 目标值
- [x] 1.1.5 各环路使能复选框
- [x] 1.1.6 添加信号：pid_changed、target_changed、loop_enabled_changed

### 1.2 控制工具栏面板
- [x] 1.2.1 创建 `control_toolbar_panel.h/cpp`
- [x] 1.2.2 运行/暂停/单步/复位按钮
- [x] 1.2.3 电机类型下拉框（PMSM/BLDC）
- [x] 1.2.4 控制模式下拉框（FOC/六步换向）
- [x] 1.2.5 仿真速度下拉框（1x/2x/5x/10x）
- [x] 1.2.6 配置导入/导出按钮
- [x] 1.2.7 添加信号：run_state_changed、reset_requested、step_requested等
- [x] 1.2.8 添加窗口管理组（波形显示/算法说明开关按钮）

## 2. 重构窗口1（FOC可视化+参数配置）

### 2.1 布局调整
- [x] 2.1.1 修改 `foc_visualization_window` 布局为左右分栏
- [x] 2.1.2 左侧：可视化面板（坐标变换、SVPWM、转子位置+步骤指示器）
- [x] 2.1.3 右侧：参数配置区（控制工具栏、电机参数、三环PID）
- [x] 2.1.4 添加窗口2/窗口3开关按钮

### 2.2 信号连接
- [x] 2.2.1 连接PID参数变化信号到控制器
- [x] 2.2.2 连接控制工具栏信号到仿真引擎
- [x] 2.2.3 保持原有可视化面板信号连接

## 3. 重构窗口2（纯波形显示）

### 3.1 创建波形窗口
- [x] 3.1.1 创建 `waveform_window.h/cpp` 替代 `control_loop_window`
- [x] 3.1.2 使用 QScrollArea + 垂直布局
- [x] 3.1.3 创建波形组件（使用 resizable_group 可调整高度）

### 3.2 波形配置（第1行两列，第2行三列，其余单列）
- [x] 3.2.1 第1行左：Ud(橙), Uq(紫) - dq坐标系电压
- [x] 3.2.2 第1行右：Id(橙), Iq(紫) - dq坐标系电流
- [x] 3.2.3 第2行左：Id_ref, Iq_ref - 电流参考
- [x] 3.2.4 第2行中：vel_ref, velocity - 速度
- [x] 3.2.5 第2行右：pos_ref, position - 位置
- [x] 3.2.6 第3行：Uα(青), Uβ(品红) - αβ坐标系电压
- [x] 3.2.7 第4行：Iα(青), Iβ(品红) - αβ坐标系电流
- [x] 3.2.8 第5行：Ua(红), Ub(绿), Uc(蓝) - 三相电压
- [x] 3.2.9 第6行：Ia(红), Ib(绿), Ic(蓝) - 三相电流
- [x] 3.2.10 第7行：Ta(红), Tb(绿), Tc(蓝) - PWM占空比

### 3.3 数据更新接口
- [x] 3.3.1 添加 `update_currents(ia,ib,ic,i_alpha,i_beta,id,iq,id_ref,iq_ref)`
- [x] 3.3.2 添加 `update_voltages(vd,vq,v_alpha,v_beta,va,vb,vc)`
- [x] 3.3.3 添加 `update_pwm(ta,tb,tc)`
- [x] 3.3.4 添加 `update_velocity(vel_ref,velocity)`
- [x] 3.3.5 添加 `update_position(pos_ref,position)`

### 3.4 可调整高度功能
- [x] 3.4.1 创建 `resizable_group` 自定义组件
- [x] 3.4.2 底部边缘可拖动调整高度
- [x] 3.4.3 添加可视化手柄（悬停/拖动高亮）

## 4. 重构窗口3（恢复原布局）

### 4.1 恢复为原布局
- [x] 4.1.1 第一行：电机模型 | 坐标变换 | SVPWM（三个并排）
- [x] 4.1.2 第二行：三环控制（单独一行，含框图编辑器）

### 4.2 窗口开关控制
- [x] 4.2.1 添加 show()/hide() 控制接口（通过窗口1按钮）
- [x] 4.2.2 默认隐藏

## 5. 更新主程序连接

### 5.1 信号重新连接
- [x] 5.1.1 修改 `main.cpp` 信号连接
- [x] 5.1.2 窗口1参数配置信号 → 仿真引擎/控制器
- [x] 5.1.3 仿真引擎状态 → 窗口2波形更新
- [x] 5.1.4 环路使能信号 → 窗口3框图配置

### 5.2 数据通道扩展
- [x] 5.2.1 扩展 `motor_state_t` 添加三相电压字段
- [x] 5.2.2 在 pmsm_model 和 bldc_model 中计算三相电压

## 6. 验证
- [x] 6.1 参数配置功能：各参数滑块/数值框可调节
- [x] 6.2 波形显示：所有波形正确显示
- [x] 6.3 波形高度可调：底部手柄可拖动调整行高
- [x] 6.4 窗口2/3开关：可通过按钮切换显示/隐藏
- [x] 6.5 信号连接：参数变化正确传递到仿真引擎
